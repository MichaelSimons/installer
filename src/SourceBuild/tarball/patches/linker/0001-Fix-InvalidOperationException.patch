From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: MichaelSimons <msimons@microsoft.com>
Date: Fri, 12 Aug 2022 18:46:56 +0000
Subject: [PATCH] Fix InvalidOperationException

---
 external/cecil                     | 2 +-
 src/linker/Linker/MessageOrigin.cs | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/external/cecil b/external/cecil
index 2cd569a9..fcbb2341 160000
--- a/external/cecil
+++ b/external/cecil
@@ -1 +1 @@
-Subproject commit 2cd569a98964629b8fa88284a8b5af8077d5f9de
+Subproject commit fcbb234133cf1ffba99373b46b5f21edb3bc3787
diff --git a/src/linker/Linker/MessageOrigin.cs b/src/linker/Linker/MessageOrigin.cs
index 24d18c06..73a97e80 100644
--- a/src/linker/Linker/MessageOrigin.cs
+++ b/src/linker/Linker/MessageOrigin.cs
@@ -85,7 +85,7 @@ public MessageOrigin (MessageOrigin other, int ilOffset)
 				method.DebugInformation.HasSequencePoints) {
 				var offset = ILOffset ?? 0;
 				SequencePoint? correspondingSequencePoint = method.DebugInformation.SequencePoints
-					.Where (s => s.Offset <= offset)?.Last ();
+					.Where (s => s.Offset <= offset)?.LastOrDefault ();
 
 				// If the warning comes from hidden line (compiler generated code typically)
 				// search for any sequence point with non-hidden line number and report that as a best effort.
